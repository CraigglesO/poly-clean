const fs = require('fs')
const { cleanPoly } = require('./lib')

// const poly = [
//   [
//     [
//       0.215576171875,
//       0.65625
//     ],
//     [
//       0.215576171875,
//       0.656005859375
//     ],
//     [
//       0.21728515625,
//       0.657958984375
//     ],
//     [
//       0.220947265625,
//       0.65869140625
//     ],
//     [
//       0.217529296875,
//       0.658447265625
//     ],
//     [
//       0.21728515625,
//       0.657958984375
//     ],
//     [
//       0.21630859375,
//       0.657958984375
//     ],
//     [
//       0.215576171875,
//       0.656494140625
//     ],
//     [
//       0.215576171875,
//       0.65625
//     ],
//     [
//       0.215087890625,
//       0.65576171875
//     ],
//     [
//       0.215576171875,
//       0.65625
//     ]
//   ]
// ]

const poly = [
  [
    [
      1,
      0.656494140625
    ],
    [
      0.979736328125,
      0.637939453125
    ],
    [
      0.9423828125,
      0.590087890625
    ],
    [
      0.814208984375,
      0.540771484375
    ],
    [
      0.788330078125,
      0.53662109375
    ],
    [
      0.784423828125,
      0.535888671875
    ],
    [
      0.779052734375,
      0.53271484375
    ],
    [
      0.77197265625,
      0.524658203125
    ],
    [
      0.7734375,
      0.51953125
    ],
    [
      0.77685546875,
      0.517822265625
    ],
    [
      0.7666015625,
      0.51953125
    ],
    [
      0.76220703125,
      0.51708984375
    ],
    [
      0.751220703125,
      0.513427734375
    ],
    [
      0.74658203125,
      0.516357421875
    ],
    [
      0.718994140625,
      0.492919921875
    ],
    [
      0.723876953125,
      0.493896484375
    ],
    [
      0.726806640625,
      0.49560546875
    ],
    [
      0.7314453125,
      0.497802734375
    ],
    [
      0.736328125,
      0.5029296875
    ],
    [
      0.741455078125,
      0.50537109375
    ],
    [
      0.74169921875,
      0.50390625
    ],
    [
      0.73828125,
      0.50244140625
    ],
    [
      0.735107421875,
      0.498291015625
    ],
    [
      0.73095703125,
      0.49609375
    ],
    [
      0.7216796875,
      0.49169921875
    ],
    [
      0.710205078125,
      0.483154296875
    ],
    [
      0.705810546875,
      0.484619140625
    ],
    [
      0.70458984375,
      0.48095703125
    ],
    [
      0.69970703125,
      0.482666015625
    ],
    [
      0.691650390625,
      0.47265625
    ],
    [
      0.68798828125,
      0.47998046875
    ],
    [
      0.684814453125,
      0.47900390625
    ],
    [
      0.680908203125,
      0.47705078125
    ],
    [
      0.673095703125,
      0.47314453125
    ],
    [
      0.675537109375,
      0.468505859375
    ],
    [
      0.686279296875,
      0.46142578125
    ],
    [
      0.6923828125,
      0.464111328125
    ],
    [
      0.6982421875,
      0.464599609375
    ],
    [
      0.6884765625,
      0.4599609375
    ],
    [
      0.66357421875,
      0.462890625
    ],
    [
      0.6591796875,
      0.465087890625
    ],
    [
      0.6552734375,
      0.46533203125
    ],
    [
      0.651123046875,
      0.464599609375
    ],
    [
      0.647705078125,
      0.46337890625
    ],
    [
      0.64404296875,
      0.461669921875
    ],
    [
      0.64013671875,
      0.458984375
    ],
    [
      0.63671875,
      0.4580078125
    ],
    [
      0.63232421875,
      0.45703125
    ],
    [
      0.626708984375,
      0.454833984375
    ],
    [
      0.6201171875,
      0.45166015625
    ],
    [
      0.6162109375,
      0.450439453125
    ],
    [
      0.60986328125,
      0.44775390625
    ],
    [
      0.60498046875,
      0.4453125
    ],
    [
      0.600830078125,
      0.442626953125
    ],
    [
      0.596923828125,
      0.439697265625
    ],
    [
      0.5908203125,
      0.43798828125
    ],
    [
      0.585693359375,
      0.4365234375
    ],
    [
      0.58154296875,
      0.43505859375
    ],
    [
      0.578125,
      0.4326171875
    ],
    [
      0.57421875,
      0.42919921875
    ],
    [
      0.57080078125,
      0.42724609375
    ],
    [
      0.56640625,
      0.425537109375
    ],
    [
      0.561767578125,
      0.423095703125
    ],
    [
      0.557373046875,
      0.41943359375
    ],
    [
      0.554931640625,
      0.416015625
    ],
    [
      0.553466796875,
      0.41162109375
    ],
    [
      0.55419921875,
      0.40576171875
    ],
    [
      0.550537109375,
      0.41064453125
    ],
    [
      0.546875,
      0.411376953125
    ],
    [
      0.515380859375,
      0.393310546875
    ],
    [
      0.487060546875,
      0.3662109375
    ],
    [
      0.470947265625,
      0.3427734375
    ],
    [
      0.475830078125,
      0.344970703125
    ],
    [
      0.4580078125,
      0.318603515625
    ],
    [
      0.455078125,
      0.294677734375
    ],
    [
      0.458251953125,
      0.300048828125
    ],
    [
      0.459228515625,
      0.30322265625
    ],
    [
      0.460693359375,
      0.3076171875
    ],
    [
      0.46240234375,
      0.313232421875
    ],
    [
      0.457763671875,
      0.316650390625
    ],
    [
      0.450927734375,
      0.3193359375
    ],
    [
      0.458251953125,
      0.310791015625
    ],
    [
      0.447998046875,
      0.317138671875
    ],
    [
      0.456298828125,
      0.30712890625
    ],
    [
      0.4462890625,
      0.308837890625
    ],
    [
      0.445556640625,
      0.304931640625
    ],
    [
      0.427490234375,
      0.28662109375
    ],
    [
      0.419677734375,
      0.289306640625
    ],
    [
      0.404541015625,
      0.278564453125
    ],
    [
      0.3955078125,
      0.263671875
    ],
    [
      0.3994140625,
      0.259033203125
    ],
    [
      0.391357421875,
      0.263427734375
    ],
    [
      0.384033203125,
      0.255859375
    ],
    [
      0.379638671875,
      0.251953125
    ],
    [
      0.376220703125,
      0.24853515625
    ],
    [
      0.37158203125,
      0.2431640625
    ],
    [
      0.369140625,
      0.239501953125
    ],
    [
      0.36376953125,
      0.23095703125
    ],
    [
      0.361328125,
      0.22705078125
    ],
    [
      0.3583984375,
      0.2197265625
    ],
    [
      0.35546875,
      0.21142578125
    ],
    [
      0.354248046875,
      0.20751953125
    ],
    [
      0.35302734375,
      0.2001953125
    ],
    [
      0.3525390625,
      0.19580078125
    ],
    [
      0.35302734375,
      0.19189453125
    ],
    [
      0.360107421875,
      0.17822265625
    ],
    [
      0.36376953125,
      0.174560546875
    ],
    [
      0.373291015625,
      0.1630859375
    ],
    [
      0.388671875,
      0.150146484375
    ],
    [
      0.39306640625,
      0.1494140625
    ],
    [
      0.3984375,
      0.150634765625
    ],
    [
      0.403564453125,
      0.15087890625
    ],
    [
      0.40673828125,
      0.151123046875
    ],
    [
      0.414306640625,
      0.148681640625
    ],
    [
      0.408935546875,
      0.148193359375
    ],
    [
      0.40234375,
      0.14794921875
    ],
    [
      0.397705078125,
      0.147705078125
    ],
    [
      0.393798828125,
      0.146240234375
    ],
    [
      0.390625,
      0.14404296875
    ],
    [
      0.382568359375,
      0.138427734375
    ],
    [
      0.376708984375,
      0.132568359375
    ],
    [
      0.28076171875,
      0.046142578125
    ],
    [
      0.26025390625,
      0.036865234375
    ],
    [
      0.25732421875,
      0.03564453125
    ],
    [
      0.251708984375,
      0.031982421875
    ],
    [
      0.2294921875,
      0.021728515625
    ],
    [
      0.222900390625,
      0.020263671875
    ],
    [
      0.216064453125,
      0.01904296875
    ],
    [
      0.208984375,
      0.016845703125
    ],
    [
      0.190673828125,
      0.013916015625
    ],
    [
      0.164794921875,
      0.008544921875
    ],
    [
      0.15966796875,
      0.008544921875
    ],
    [
      0.147705078125,
      0.00146484375
    ],
    [
      0.1484375,
      0
    ],
    [
      1,
      0
    ],
    [
      1,
      0.656494140625
    ]
  ]
]

cleanPoly(poly)

const featureCollection = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: {},
      geometry: {
        type: 'Polygon',
        coordinates: poly
      }
    }
  ]
}

fs.writeFileSync('./out.geojson', JSON.stringify(featureCollection, null, 2))
